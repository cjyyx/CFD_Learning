#! https://zhuanlan.zhihu.com/p/603663230
# 有限体积法（二）半离散形式

通过[上一篇文章](https://zhuanlan.zhihu.com/p/603476900)，我们了解了有限体积法的基本过程：先确定几何域、控制方程、边界条件，再划分网格，再将控制方程和边界条件离散为线性方程（也有可能是非线性方程），再求解线性方程组（非线性方程组）。其中确定几何域、控制方程、边界条件属于数学建模的过程，划分网格比较容易，求解方程组是数值计算的内容。因此有限体积法的核心就是将控制方程和边界条件离散为方程。

## 控制方程通用形式

一般情况下，CFD中涉及的偏微分方程都可以转化为以下形式
$$
\frac{\partial}{\partial t}(\rho \phi)+\nabla \cdot(\rho \mathbf{v} \phi)=\nabla \cdot\left(\Gamma^{\phi} \nabla \phi\right)+Q^{\phi}\tag{2-1}
$$

其中$t$为时间；$\rho$为流体密度；$\phi$为通用变量，代表$\mathbf{v},T$等求解变量；$\mathbf{v}$为流场；$\Gamma^{\phi}$为广义扩散系数，一般为一个常数；$Q^{\phi}$为源项，与$\phi$的产生有关，比较复杂。

$\partial (\rho \phi)/ \partial t$称为非稳态项（transient term）；$\nabla \cdot(\rho \mathbf{v} \phi)$称为对流项（convective term）；$\nabla \cdot\left(\Gamma^{\phi} \nabla \phi\right)$称为扩散项（diffusion term）；$Q^{\phi}$称为源项（source term）。

具体形式可参考[有限体积法（11）基本方程推导——守恒方程通用形式](https://zhuanlan.zhihu.com/p/366959804)。

## 半离散形式

假设有一个控制体$C$，对该控制体应用控制方程通用形式，并积分，有
$$
\frac{\partial}{\partial t} \left( \iiint_{V_{C}} \rho \phi \text{d} V \right) +\iiint_{V_{C}} \nabla \cdot(\rho \mathbf{v} \phi) \text{d} V=\iiint_{V_{C}} \nabla \cdot\left(\Gamma^{\phi} \nabla \phi\right) \text{d} V+\iiint_{V_{C}} Q^{\phi} \text{d} V \tag{2-2}
$$

再应用散度定理，有
$$
\frac{\partial}{\partial t} \left( \iiint_{V_{C}} \rho \phi \text{d} V \right) +\oint_{\partial V_{C}}(\rho \mathbf{v} \phi) \cdot \text{d} \mathbf{S}=\oint_{\partial V_{C}}\left(\Gamma^{\phi} \nabla \phi\right) \cdot \text{d} \mathbf{S}+\iiint_{V_{C}} Q^{\phi} \text{d} V \tag{2-3}
$$
*注意这里使用$\oint$而不是$\oiint$，是因为知乎不支持渲染二重闭合积分符号(╬▔皿▔)╯*

方程（2-3）的物理意义是
$$
单位时间控制体内\phi的量的变化+单位时间\phi流出控制体的量\\
=单位时间\phi扩散入控制体的量+单位时间\phi在控制体内产生的量
$$

方程（2-3）被称为**半离散形式**。



<未完继续>